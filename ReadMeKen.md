# Message for Ken
You are using this app template (pre-installed in /home/user/workspace) to build out the user's requested app. This file has some examples for optimal ways to handle specific requests and a detailed file tree describing the template. Do not edit this file.

# Original File Tree of Template (does not track changes you make)

home/user/workspace
│
├── assets/ 
├── src/ 
│   ├── components/ 
│   ├── screens/ 
│   ├── navigation/
│   ├── api/
│   │   ├── transcribe-audio.ts  # CURL implementation of the transcription API you should stick to
│   │   ├── grok.ts              # prebuilt client hooked up to the grok API, has documentation on latest models outside your training data cut-off
│   │   ├── image-generation.ts  # CURL implementation of the image generation API you should stick to
│   │   ├── openai.ts            # prebuilt client hooked up to the openai API, has documentation on latest models outside your training data cut-off
│   │   ├── chat-service.ts      # prebuilt functions for getting a text response from LLMs.
│   │   └── anthropic.ts         # Prebuilt client hooked up to the anthropic API, has documentation on latest models outside your training data cut-off
│   ├── types/                   
│   ├── utils/                   
│   │   └── cn.ts                # includes helper function to merge classnames for tailwind styling
│   └── state/                   # Example for using local storage memory
│
├── patches/                     # Forbidden
├── App.tsx                      # Entrypoint, must be updated to reflect progress
├── index.ts                     # imports global.css -- tailwind is already hooked up
├── global.css                   # Don't change unless necessary, use tailwind
├── tailwind.config.js           # Customize this if needed
├── tsconfig.json                # Forbidden
├── babel.config.js              # Forbidden 
├── metro.config.js              # Forbidden
├── app.json                     # Forbidden
├── package.json                 # Dependencies and scripts, view for pre-installed packages
├── bun.lock                     # Reminder, use bun
├── generate-asset-script.ts     # used to generate assets, requires modification (DO NOT USE PROACTIVELY)
├── nativewind-env.d.ts          # Forbidden
├── .gitignore                   # Forbidden
├── .prettierrc                  # Forbidden
└── .eslintrc.js                 # Forbidden

# Common Mistakes

Do not be over-eager to implement features outlined below. Only implement them if the user requests audio-transcription/camera/image-generation features due to the user's request. 

## Mistakes 1: Handling images and camera

If the user asks for image analysis, do not mock the data for this. Actually send the image to an LLM, the models in src/api/chat-service.ts can all take image input.

When implementing the camera, do not use 'import { Camera } from 'expo-camera';' It is deprecated. Instead use this:

```
import { CameraView, CameraType, useCameraPermissions, CameraViewRef } from 'expo-camera';
const [facing, setFacing] = useState<CameraType>('back'); // or 'front'
<CameraView ref={cameraRef}
  style={{ flex: 1 }}  // Using direct style instead of className for better compatibility, className will break the camera view
  facing={facing}
  enableTorch={flash}
  ref={cameraRef}
/> 
{/* Overlay UI -- absolute is important or else it will push the camera view out of the screen */}
  <View className="absolute top-0 left-0 right-0 bottom-0 z-10">
    <Pressable onPress={toggleCameraFacing}>
      <Text style={styles.text}>Flip Camera</Text>
    </Pressable>
  </View>
</CameraView>
```
### Common mistakes to avoid when implementing camera
- Using the wrong import for expo-camera
- Using className instead of style for the camera view
- Not properly styling the overlay UI
- Mocking the data for analysis
- Not initializing all hooks before conditionally/early returns 

## Mistakes 2: Handling voice transcriptions

As of April 23th 2025, the best post-event transcription API is through OpenAI's model 'gpt-4o-transcribe'. Default to using this model even if the user suggests other transcription providers as you have an OpenAI api key already in this environment. 'transcribeAudio' is a functional prebuilt implementation that is ready for you to use, located in /src/api/transcribe-audio.ts.

Be proactive in using the existing implementations provided.

### Common mistake to avoid when implementing audio recording
- Mocking the data for audio transcription
- Importing buffer from buffer (We do not have nodejs buffer because this is react native)
- Trying to implement it your own way (you will use an old model/api and the user will be disappointed)
- Not handling the wait time gracefully

## Mistakes 3: Implementing image Generating functionality

On April 23th 2025, OpenAI released their gpt-4o image generation model as an API, with the model's name being 'gpt-image-1'. Vibecode internally maintains a provider for this functionality, and is easily accessible to you with the prebuilt implementation 'generateImage', located in src/api/image-generation.ts. 

Be proactive in using the existing implementations provided.

### Common mistakes to avoid when implementing image Generating functionality
- Trying to implement it your own way (you will use an old model and the user will be disappointed)
- Not being resourceful and forgetting to use this function when asked for features related to image generation, like an "icon generator" or "IG story graphic generator" etc
- Not handling the wait time gracefully, or early aborting (results often takes 60+ seconds to return)
- Not passing in the correct params for into the options for the Vibecode maintained endpoint

## Mistakes 4: Generating visual assets for the app

If specifically asked to generate assets for the app, use generate-asset-script.ts to generate up to three images each agent trajectory. Ask for png or JPEG -- do not ask for SVG.

### Common mistakes to avoid when generating assets
- Not saving to the assets folder
- Asking for SVG
- Using a useEffect hook to generate images during runtime instead of executing generate-asset-script.ts 
- Not updating the script to use a detailed prompt and customizing the options parameter
- Not generating all assets at once, or generating more than 3 assets

## Mistake 5: Safe areas with navigation

When adding navigation, use View not SafeAreaView in screens since App.tsx already has SafeAreaProvider.

### Common mistakes to avoid
- Double safe area handling causes white space above tabs
- Place StatusBar before TabNavigator, not inside screens