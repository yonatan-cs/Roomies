+ exec gosu vibecode node node_modules/.bin/expo start --localhost
env: load .env
env: export EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY EXPO_PUBLIC_VIBECODE_ANTHROPIC_API_KEY EXPO_PUBLIC_VIBECODE_GROK_API_KEY EXPO_PUBLIC_VIBECODE_GOOGLE_API_KEY EXPO_PUBLIC_VIBECODE_ELEVENLABS_API_KEY EXPO_PUBLIC_VIBECODE_FIREBASE_SERVER_KEY
Starting project at /home/user/workspace
Starting Metro Bundler
Waiting on http://localhost:8081
Logs for your project will appear below.
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS ./index.ts ▓░░░░░░░░░░░░░░░  9.0% ( 40/178)
iOS ./index.ts ▓▓▓▓░░░░░░░░░░░░ 27.1% (327/659)
iOS ./index.ts ▓▓▓▓▓▓░░░░░░░░░░ 41.1% (549/856)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓░░░░░░░ 57.8% ( 834/1097)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓▓▓▓░░░░ 78.0% (1102/1248)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ 94.3% (1388/1430)
iOS Bundled 23060ms index.ts (1475 modules)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔊 Haptic: medium impact
 LOG  🆕 Creating user with clean data (no apartment ID): {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  📝 Creating document in collection: users
 LOG  📋 Document data: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  🆔 Document ID: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 60 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users?documentId=otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  📤 Request body fields: ["email", "full_name", "display_name"]
 LOG  📊 Response status: 200 ()
 LOG  Document created successfully: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🎉 Registration successful, calling onAuthSuccess immediately...
 LOG  🎉 User data being passed: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🎉 onAuthSuccess function type: function
 LOG  🎉 onAuthSuccess function: [Function handleAuthSuccess]
 LOG  🎉 WelcomeScreen: handleAuthSuccess called!
 LOG  🎉 WelcomeScreen: Auth success, setting user and checking apartment...
 LOG  🎉 WelcomeScreen: User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  👤 WelcomeScreen: New user detected (no apartment_id), skipping ALL Firestore operations
 LOG  📭 WelcomeScreen: Directing new user to join/create apartment screen
 LOG  ✅ WelcomeScreen: Setting initializing to false for new user
 LOG  🔍 setInitializing(false) called from: handleAuthSuccess - new user
 LOG  ✅ WelcomeScreen: New user setup completed
 LOG  ✅ onAuthSuccess called successfully
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760033220058_spjnzkvex
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760033220058_spjnzkvex\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:07:00.059Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔄 WelcomeScreen: Force re-render after 100ms
 LOG  🔍 setInitializing(false) called from: handleAuthSuccess - force re-render
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 Additional fallback: Checking if user is set...
 LOG  ✅ Additional fallback: User found in store, navigation should work
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760033734402_d1esgey35
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 51 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760033734402_d1esgey35\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:15:34.402Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760035024249_x0pad3pzk
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 29 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760035024249_x0pad3pzk\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:37:04.250Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760035035926_mcqar74ld
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 29 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760035035926_mcqar74ld\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:37:15.926Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🚀 Starting apartment join process...
 LOG  🧑‍💻 Current user check: otmf6ZDcYigiDhogNKzrD4YRyfS2 (del@gmail.com)
 LOG  👤 Current user details: {"email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה"}
 LOG  ⏳ Waiting for authentication to stabilize...
 LOG  🔍 Attempting to join apartment with code: "98EG2Q"
 LOG  🔗 Joining apartment with code: 98EG2Q
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  👤 Current user ID: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Fetching invite document: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartmentInvites/98EG2Q
 LOG  📊 Invite response: 200 ()
 LOG  📋 Found invite: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "apartmentName": "משפחת רותם", "inviteCode": "98EG2Q"}
 LOG  🤝 Creating membership document:
 LOG  📋 URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartmentMembers?documentId=81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🆔 Membership ID: 81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  👤 User ID: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🏠 Apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📝 Body: {
  "fields": {
    "apartment_id": {
      "stringValue": "81KfbcHHg4DPPdodHSnm"
    },
    "user_id": {
      "stringValue": "otmf6ZDcYigiDhogNKzrD4YRyfS2"
    },
    "role": {
      "stringValue": "member"
    },
    "created_at": {
      "timestampValue": "2025-10-09T18:38:12.838Z"
    }
  }
}
 LOG  📊 Membership creation response: 200 ()
 LOG  ✅ Membership created successfully
 LOG  👤 Setting current apartment for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  📋 URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=current_apartment_id
 LOG  📝 Body: {
  "fields": {
    "current_apartment_id": {
      "stringValue": "81KfbcHHg4DPPdodHSnm"
    }
  }
}
 LOG  📊 Set current apartment response: 200 ()
 LOG  ✅ Current apartment set successfully
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  ✅ Successfully joined apartment: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "name": "משפחת רותם"}
 LOG  🏠 Successfully joined apartment: משפחת רותם (ID: 81KfbcHHg4DPPdodHSnm)
 LOG  🏠 Setting local apartment after join: {"id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "memberCount": 1, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🎉 Apartment join process completed successfully!
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:38:19.384892Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:38:19.384892Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:38:20.120704Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:38:20.120704Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.806868Z"}, "readTime": "2025-10-09T18:38:20.132146Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:38:20.132146Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.806868Z"}, "readTime": "2025-10-09T18:38:21.093944Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:38:21.093944Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": true, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔊 Haptic: selection
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:38:27.395735Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:38:27.395735Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 28 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.806868Z"}, "readTime": "2025-10-09T18:38:28.435646Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:38:28.435646Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: success
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 86ms index.ts (1 module)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760035294918_7klll8u7y
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760035294918_7klll8u7y\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:41:34.918Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:41:39.438073Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:41:39.438073Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📊 Members query response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:41:40.037354Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:41:40.037354Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:41:40.043222Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:41:40.043222Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:41:35.938247Z"}, "readTime": "2025-10-09T18:41:40.053361Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:41:40.053361Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔊 Haptic: selection
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:41:35.938247Z"}, "readTime": "2025-10-09T18:41:41.004398Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:41:41.004398Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:41:35.938247Z"}, "readTime": "2025-10-09T18:41:41.097882Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:41:41.097882Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 25 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
iOS Bundled 87ms index.ts (1 module)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760035322337_uqthyxrtb
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760035322337_uqthyxrtb\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:42:02.337Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:06.966164Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:06.966164Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:07.467325Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:07.467325Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:07.743613Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:07.743613Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:07.964833Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:07.964833Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔊 Haptic: selection
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:09.500594Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:09.500594Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔊 Haptic: selection
 LOG  📊 Batch get response: 200 ()
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:09.957459Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:09.957459Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:16.246587Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:16.246587Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:16.631430Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:16.631430Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:30.507740Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:30.507740Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:30.537610Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:30.537610Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:30.558420Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:30.558420Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:30.759887Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:30.759887Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:30.798532Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:30.798532Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:30.859900Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:30.859900Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:47.993044Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:47.993044Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:48.000806Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:48.000806Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:42:48.012717Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:42:48.012717Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:48.250473Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:48.250473Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:48.264596Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:48.264596Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:42:03.452359Z"}, "readTime": "2025-10-09T18:42:48.268694Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:42:48.268694Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔊 Haptic: selection
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 24 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔊 Haptic: selection
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 91ms index.ts (1 module)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760035428224_v3m35g0rr
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760035428224_v3m35g0rr\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:43:48.226Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 ERROR  GET_CLEANING_TASK_ERROR [TypeError: Network request failed]
 ERROR  GET_CLEANING_TASK_ERROR [TypeError: Network request failed]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:43:52.873819Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:43:52.873819Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:43:53.073069Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:43:53.073069Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:43:53.303140Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:43:53.303140Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Batch get response: 200 ()
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:43:53.314353Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:43:53.314353Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔍 Turn check debug: {"currentTurnUserId": null, "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": false, "taskUserField": undefined}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:43:55.110317Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:43:55.110317Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:43:55.360495Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:43:55.360495Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 23 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:44:20.983645Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:44:20.983645Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:44:21.249141Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:44:21.249141Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:44:40.134342Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:44:40.134342Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 22 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:44:40.436397Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:44:40.436397Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:45:04.012412Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:45:04.012412Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:45:04.258235Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:45:04.258235Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:45:55.721698Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:45:55.721698Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:45:55.960320Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:45:55.960320Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:45:55.960221Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:45:55.960221Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:45:56.023190Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:45:56.023190Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:45:56.279899Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:45:56.279899Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:45:56.284440Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:45:56.284440Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔊 Haptic: selection
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔊 Haptic: selection
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 21 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": false, "language": "en"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:46:41.418327Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:46:41.418327Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:46:41.427471Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:46:41.427471Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:46:41.606334Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:46:41.606334Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:46:41.685625Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:46:41.685625Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:46:41.705624Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:46:41.705624Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:46:41.912324Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:46:41.912324Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:46:50.915356Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:46:50.915356Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 20 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:46:51.165480Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:46:51.165480Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔊 Haptic: selection
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:51:58.540145Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:51:58.540145Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 15 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:51:59.442672Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:51:59.442672Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:52:18.558197Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:52:18.558197Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 14 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:52:19.315163Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:52:19.315163Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:53:12.109142Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:53:12.109142Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:53:12.827851Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:53:12.827851Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:53:33.713160Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:53:33.713160Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:53:34.365681Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:53:34.365681Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:53:39.602230Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:53:39.602230Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 13 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:53:40.367539Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:53:40.367539Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:54:51.820258Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:54:51.820258Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 12 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:54:52.562154Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:54:52.562154Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:55:36.597508Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:55:36.597508Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 11 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:43:50.256103Z"}, "readTime": "2025-10-09T18:55:37.352326Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:55:37.352326Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 90ms index.ts (1 module)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760036251147_0gsfv1ik7
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760036251147_0gsfv1ik7\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:57:31.147Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:57:35.595909Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:57:35.595909Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:57:35.802691Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:57:35.802691Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:57:36.550229Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:57:36.550229Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:57:36.575627Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:57:36.575627Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔊 Haptic: selection
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔊 Haptic: selection
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:57:56.873628Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:57:56.873628Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 9 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:57:57.865660Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:57:57.865660Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:58:29.674421Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:58:29.674421Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔊 Haptic: selection
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:58:30.406162Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:58:30.406162Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:58:43.487693Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:58:43.487693Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔊 Haptic: selection
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:58:44.246223Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:58:44.246223Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 ERROR  Warning: Text strings must be rendered within a <Text> component.

[0m [90m  5 |[39m [90m// English-only comments[39m
 [90m  6 |[39m [90m// Card wrapper that applies default background and border only if not provided[39m
[31m[1m>[22m[39m[90m  7 |[39m [36mexport[39m [36mfunction[39m [33mThemedCard[39m({ style[33m,[39m [33m...[39mrest }[33m:[39m [33mViewProps[39m) {
 [90m    |[39m                                   [31m[1m^[22m[39m
 [90m  8 |[39m   [36mconst[39m { theme } [33m=[39m useTheme()[33m;[39m
 [90m  9 |[39m   [36mconst[39m base [33m=[39m [33mReact[39m[33m.[39museMemo(
 [90m 10 |[39m     () [33m=>[39m[0m

Call Stack
  ThemedCard (src/theme/components/ThemedCard.tsx:7:35)
  Wrapper (<anonymous>)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  Screen (src/components/Screen.tsx:16:11)
  SettingsScreen (src/screens/SettingsScreen.tsx:28:31)
  MainTabs (src/navigation/AppNavigator.tsx:26:31)
  ScreenContentWrapper (<anonymous>)
  RNSScreenStack (<anonymous>)
  AppNavigator (src/navigation/AppNavigator.tsx:113:37)
  ThemedRoot (App.tsx:74:45)
  ThemedAlertProvider (src/components/ThemedAlert.tsx:248:47)
  ThemeProvider (src/theme/ThemeProvider.tsx:20:41)
  RNCSafeAreaProvider (<anonymous>)
  App (App.tsx:48:31)
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:58:47.559405Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:58:47.559405Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:58:48.316380Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:58:48.316380Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 ERROR  Warning: Text strings must be rendered within a <Text> component.

[0m [90m  5 |[39m [90m// English-only comments[39m
 [90m  6 |[39m [90m// Card wrapper that applies default background and border only if not provided[39m
[31m[1m>[22m[39m[90m  7 |[39m [36mexport[39m [36mfunction[39m [33mThemedCard[39m({ style[33m,[39m [33m...[39mrest }[33m:[39m [33mViewProps[39m) {
 [90m    |[39m                                   [31m[1m^[22m[39m
 [90m  8 |[39m   [36mconst[39m { theme } [33m=[39m useTheme()[33m;[39m
 [90m  9 |[39m   [36mconst[39m base [33m=[39m [33mReact[39m[33m.[39museMemo(
 [90m 10 |[39m     () [33m=>[39m[0m

Call Stack
  ThemedCard (src/theme/components/ThemedCard.tsx:7:35)
  Wrapper (<anonymous>)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  Screen (src/components/Screen.tsx:16:11)
  SettingsScreen (src/screens/SettingsScreen.tsx:28:31)
  MainTabs (src/navigation/AppNavigator.tsx:26:31)
  ScreenContentWrapper (<anonymous>)
  RNSScreenStack (<anonymous>)
  AppNavigator (src/navigation/AppNavigator.tsx:113:37)
  ThemedRoot (App.tsx:74:45)
  ThemedAlertProvider (src/components/ThemedAlert.tsx:248:47)
  ThemeProvider (src/theme/ThemeProvider.tsx:20:41)
  RNCSafeAreaProvider (<anonymous>)
  App (App.tsx:48:31)
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 ERROR  Warning: Text strings must be rendered within a <Text> component.

[0m [90m  5 |[39m [90m// English-only comments[39m
 [90m  6 |[39m [90m// Card wrapper that applies default background and border only if not provided[39m
[31m[1m>[22m[39m[90m  7 |[39m [36mexport[39m [36mfunction[39m [33mThemedCard[39m({ style[33m,[39m [33m...[39mrest }[33m:[39m [33mViewProps[39m) {
 [90m    |[39m                                   [31m[1m^[22m[39m
 [90m  8 |[39m   [36mconst[39m { theme } [33m=[39m useTheme()[33m;[39m
 [90m  9 |[39m   [36mconst[39m base [33m=[39m [33mReact[39m[33m.[39museMemo(
 [90m 10 |[39m     () [33m=>[39m[0m

Call Stack
  ThemedCard (src/theme/components/ThemedCard.tsx:7:35)
  Wrapper (<anonymous>)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  ThemedView (src/theme/components/ThemedView.tsx:7:35)
  Screen (src/components/Screen.tsx:16:11)
  SettingsScreen (src/screens/SettingsScreen.tsx:28:31)
  MainTabs (src/navigation/AppNavigator.tsx:26:31)
  ScreenContentWrapper (<anonymous>)
  RNSScreenStack (<anonymous>)
  AppNavigator (src/navigation/AppNavigator.tsx:113:37)
  ThemedRoot (App.tsx:74:45)
  ThemedAlertProvider (src/components/ThemedAlert.tsx:248:47)
  ThemeProvider (src/theme/ThemeProvider.tsx:20:41)
  RNCSafeAreaProvider (<anonymous>)
  App (App.tsx:48:31)
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T18:58:51.227368Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T18:58:51.227368Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 8 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T18:58:51.483407Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T18:58:51.483407Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:00:06.712694Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:00:06.712694Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:57:31.611207Z"}, "readTime": "2025-10-09T19:00:06.974189Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:00:06.974189Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 89ms index.ts (1 module)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760036451480_dybs8d5ix
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔑 Getting current ID token...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Dashboard: Loading all data from Firestore...
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 Getting cleaning stats...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760036451480_dybs8d5ix\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T19:00:51.480Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 No current session, attempting to restore...
 LOG  Attempting to restore user session...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  Session restoration check: {"hasIdToken": true, "hasUserEmail": true, "hasUserId": true}
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  User session restored successfully
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session restored: {"tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:00:55.975792Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:00:55.975792Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:00:56.732799Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:00:56.732799Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:00:56.728480Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:00:56.728480Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:00:57.758512Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:00:57.758512Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Backfilling cleaning stats from existing data...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 6 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 No existing cleaning data found, initializing with 0
 LOG  ⚠️ Skipping stats creation - no user data available
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  ✅ Dashboard: Essential data loaded successfully
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔊 Haptic: selection
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔊 Haptic: selection
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:01:36.088913Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:01:36.088913Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 5 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:01:36.799280Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:01:36.799280Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔄 Token is expiring soon, attempting refresh...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 4 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 897, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ⏰ Scheduled pre-refresh in 2520s
 LOG  ✅ Token refreshed successfully
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:02:27.197697Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:02:27.197697Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:02:27.939186Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:02:27.939186Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:02:36.879575Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:02:36.879575Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:02:37.567651Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:02:37.567651Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:02:49.353726Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:02:49.353726Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:02:49.599544Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:02:49.599544Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 ERROR  SyntaxError: /home/user/workspace/src/screens/SettingsScreen.tsx: Unterminated JSX contents. (834:13)

  832 |       />
  833 |       </ScrollView>
> 834 |     </Screen>
      |              ^
  835 |   );
  836 | }
  837 |
 ERROR  [Error: TransformError SyntaxError: /home/user/workspace/src/screens/SettingsScreen.tsx: Unterminated JSX contents. (834:13)

[0m [90m 832 |[39m       [33m/[39m[33m>[39m
 [90m 833 |[39m       [33m<[39m[33m/[39m[33mScrollView[39m[33m>[39m
[31m[1m>[22m[39m[90m 834 |[39m     [33m<[39m[33m/[39m[33mScreen[39m[33m>[39m
 [90m     |[39m              [31m[1m^[22m[39m
 [90m 835 |[39m   )[33m;[39m
 [90m 836 |[39m }
 [90m 837 |[39m[0m]
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:03:20.796466Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:03:20.796466Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:03:21.023580Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:03:21.023580Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:03:46.333876Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:03:46.333876Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:03:46.617534Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:03:46.617534Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 ERROR  SyntaxError: /home/user/workspace/src/screens/SettingsScreen.tsx: Expected corresponding JSX closing tag for <Screen>. (785:6)

  783 |         </View>
  784 |       </ScrollView>
> 785 |       </Pressable>
      |       ^
  786 |
  787 |       {/* Modals - outside Pressable to prevent closing on modal interaction */}
  788 |       <ConfirmModal
 ERROR  [Error: TransformError SyntaxError: /home/user/workspace/src/screens/SettingsScreen.tsx: Expected corresponding JSX closing tag for <Screen>. (785:6)

[0m [90m 783 |[39m         [33m<[39m[33m/[39m[33mView[39m[33m>[39m
 [90m 784 |[39m       [33m<[39m[33m/[39m[33mScrollView[39m[33m>[39m
[31m[1m>[22m[39m[90m 785 |[39m       [33m<[39m[33m/[39m[33mPressable[39m[33m>[39m
 [90m     |[39m       [31m[1m^[22m[39m
 [90m 786 |[39m
 [90m 787 |[39m       {[90m/* Modals - outside Pressable to prevent closing on modal interaction */[39m}
 [90m 788 |[39m       [33m<[39m[33mConfirmModal[39m[0m]
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:04:20.172309Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:04:20.172309Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 58 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:04:20.440626Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:04:20.440626Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔊 Haptic: selection
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Members query response: 200 ()
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:04:36.886049Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:04:36.886049Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:04:37.168354Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:04:37.168354Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  📊 Members query response: 200 ()
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:04:46.007287Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:04:46.007287Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:04:46.246261Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:04:46.246261Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔄 Dashboard: Refreshing data on focus...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🔄 Getting cleaning stats...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 No cleaning stats found, returning default values
 LOG  📊 Loaded cleaning stats: {"lastUpdated": null, "perUser": {}, "totalCleans": 0}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔑 Getting current ID token...
 LOG  ✅ Dashboard: Additional data loaded successfully
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  Dashboard RTL Debug: {"I18nManagerIsRTL": false, "isRTL": true, "language": "he"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 57 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 93ms index.ts (1 module)
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔄 Settings: Refreshing apartment members on mount
 LOG  🔄 Refreshing apartment members...
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🔄 loadCleaningChecklist already in progress, skipping...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 56 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  📊 Response status: 200 ()
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:06:26.412681Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:06:26.412681Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:06:26.639626Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:06:26.639626Z"}]
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:06:26.675522Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:06:26.675522Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:06:26.892222Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:06:26.892222Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🏠 MainTabs: Loading apartment data for 81KfbcHHg4DPPdodHSnm
 LOG  🔄 Refreshing apartment members...
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🏠 Getting complete apartment data for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔍 Getting reliable apartment ID for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Checking user profile for current_apartment_id...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ Found apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  🔧 Ensuring current_apartment_id before getting apartment data...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID: 81KfbcHHg4DPPdodHSnm
 LOG  📖 Getting document: apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T20:02:25.000Z", "issuedAt": "2025-10-09T19:02:25.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/apartments/81KfbcHHg4DPPdodHSnm
 LOG  🔐 Headers: {"Authorization": "Bearer [TOKEN]", "Content-Type": "application/json"}
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Getting current ID token...
 LOG  🔍 Firestore task debug: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "currentUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "queue": ["uRT93ikDjjcKeSFJOGBPKlzKYzl1"], "taskId": "81KfbcHHg4DPPdodHSnm"}
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📊 Response status: 200 ()
 LOG  ✅ Document retrieved successfully
 LOG  👥 Getting apartment members with profiles for: 81KfbcHHg4DPPdodHSnm
 LOG  👥 Getting apartment members for: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  🔧 Ensuring current_apartment_id before query...
 LOG  🔧 Ensuring current_apartment_id for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Step 1: Reading user profile...
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Session available: {"hasToken": true, "hasUid": true, "tokenLength": 926, "tokenPreview": "eyJhbGciOiJSUzI1NiIs...", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "uidLength": 28}
 LOG  📋 Current apartment ID in profile: 81KfbcHHg4DPPdodHSnm
 LOG  ✅ current_apartment_id is already set correctly
 LOG  ✅ Using ensured apartment ID for query: 81KfbcHHg4DPPdodHSnm
 LOG  📋 Query URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:runQuery
 LOG  📝 Query body: {
  "structuredQuery": {
    "from": [
      {
        "collectionId": "apartmentMembers"
      }
    ],
    "where": {
      "fieldFilter": {
        "field": {
          "fieldPath": "apartment_id"
        },
        "op": "EQUAL",
        "value": {
          "stringValue": "81KfbcHHg4DPPdodHSnm"
        }
      }
    }
  }
}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  📊 Members query response: 200 ()
 LOG  📋 Raw query results: [{"document": {"createTime": "2025-10-09T18:38:13.485205Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T18:38:13.485205Z"}, "readTime": "2025-10-09T19:06:38.345070Z"}, {"document": {"createTime": "2025-10-09T11:17:22.223369Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/apartmentMembers/81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T11:17:22.223369Z"}, "readTime": "2025-10-09T19:06:38.345070Z"}]
 LOG  🔍 initializing state changed to: true
 LOG  ✅ Found members: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  📋 Found memberships: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👤 Unique user IDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  👤 Getting user profiles for UIDs: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 55 minutes
 LOG  ✅ ID token is valid
 LOG  📋 Batch get URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents:batchGet
 LOG  📝 Batch get body: {
  "documents": [
    "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2",
    "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1"
  ]
}
 LOG  📊 Batch get response: 200 ()
 LOG  📋 Raw batch get results: [{"found": {"createTime": "2025-10-09T18:06:59.898608Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2", "updateTime": "2025-10-09T19:00:51.866880Z"}, "readTime": "2025-10-09T19:06:38.619214Z"}, {"found": {"createTime": "2025-10-09T11:15:16.695442Z", "fields": [Object], "name": "projects/roomies-hub/databases/(default)/documents/users/uRT93ikDjjcKeSFJOGBPKlzKYzl1", "updateTime": "2025-10-09T18:35:20.935744Z"}, "readTime": "2025-10-09T19:06:38.619214Z"}]
 LOG  👤 User profile for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  👤 User profile for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם"}
 LOG  ✅ User profiles loaded: ["otmf6ZDcYigiDhogNKzrD4YRyfS2", "uRT93ikDjjcKeSFJOGBPKlzKYzl1"]
 LOG  📋 User profiles loaded: {"otmf6ZDcYigiDhogNKzrD4YRyfS2": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "uRT93ikDjjcKeSFJOGBPKlzKYzl1": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}}
 LOG  ✅ Members with profiles: [{"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_otmf6ZDcYigiDhogNKzrD4YRyfS2", "joined_at": "2025-10-09T18:38:12.838Z", "profile": {"displayName": undefined, "display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": undefined}, "role": "member", "user_id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}, {"apartment_id": "81KfbcHHg4DPPdodHSnm", "id": "81KfbcHHg4DPPdodHSnm_uRT93ikDjjcKeSFJOGBPKlzKYzl1", "joined_at": "2025-10-09T11:17:21.940Z", "profile": {"displayName": undefined, "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "full_name": "יונתן רותם", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": undefined}, "role": "member", "user_id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}]
 LOG  👥 Member data for otmf6ZDcYigiDhogNKzrD4YRyfS2: {"email": "del@gmail.com", "name": "למחיקה", "profileEmail": "del@gmail.com"}
 LOG  👥 Member data for uRT93ikDjjcKeSFJOGBPKlzKYzl1: {"email": "yonrotem@gmail.com", "name": "יונתן רותם", "profileEmail": "yonrotem@gmail.com"}
 LOG  ✅ Complete apartment data: {"description": "", "id": "81KfbcHHg4DPPdodHSnm", "invite_code": "98EG2Q", "members": [{"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "למחיקה", "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "name": "למחיקה", "role": "member"}, {"current_apartment_id": "81KfbcHHg4DPPdodHSnm", "display_name": "יונתן רותם", "email": "yonrotem@gmail.com", "id": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "name": "יונתן רותם", "role": "member"}], "name": "משפחת רותם"}
 LOG  ✅ Got complete apartment data: {"id": "81KfbcHHg4DPPdodHSnm", "memberCount": 2, "name": "משפחת רותם"}
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 getUserCurrentApartmentId - user profile response: {"apartmentIdLength": 20, "apartmentIdType": "string", "apartmentIdValue": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartmentId": true, "hasFields": true, "status": 200}
 LOG  ✅ Found apartment ID in user profile: 81KfbcHHg4DPPdodHSnm
 LOG  🧪 checklist query ctx {"aptId": "81KfbcHHg4DPPdodHSnm", "current": "81KfbcHHg4DPPdodHSnm", "uid": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Turn check debug: {"currentTurnUserId": "uRT93ikDjjcKeSFJOGBPKlzKYzl1", "currentUserExists": true, "currentUserId": "otmf6ZDcYigiDhogNKzrD4YRyfS2", "isMyTurn": false, "taskCurrentTurn": undefined, "taskExists": true, "taskUserField": "uRT93ikDjjcKeSFJOGBPKlzKYzl1"}
 LOG  ✅ MainTabs: Apartment data loaded successfully
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔊 Haptic: selection
 LOG  🔍 initializing state changed to: true
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔊 Haptic: selection
 LOG  🚪 AppNavigator: Navigation decision: {"apartmentId": "81KfbcHHg4DPPdodHSnm", "hasCurrentApartment": true, "hasUser": true, "hasValidApartmentId": true, "showWelcome": false, "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS Bundled 91ms index.ts (1 module)
