+ exec gosu vibecode node node_modules/.bin/expo start --localhost
env: load .env
env: export EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY EXPO_PUBLIC_VIBECODE_ANTHROPIC_API_KEY EXPO_PUBLIC_VIBECODE_GROK_API_KEY EXPO_PUBLIC_VIBECODE_GOOGLE_API_KEY EXPO_PUBLIC_VIBECODE_ELEVENLABS_API_KEY EXPO_PUBLIC_VIBECODE_FIREBASE_SERVER_KEY
Starting project at /home/user/workspace
Starting Metro Bundler
Waiting on http://localhost:8081
Logs for your project will appear below.
iOS ./index.ts ░░░░░░░░░░░░░░░░  0.0% (0/1)
iOS ./index.ts ▓░░░░░░░░░░░░░░░  9.0% ( 40/178)
iOS ./index.ts ▓▓▓▓░░░░░░░░░░░░ 27.1% (327/659)
iOS ./index.ts ▓▓▓▓▓▓░░░░░░░░░░ 41.1% (549/856)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓░░░░░░░ 57.8% ( 834/1097)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓▓▓▓░░░░ 78.0% (1102/1248)
iOS ./index.ts ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░ 94.3% (1388/1430)
iOS Bundled 23060ms index.ts (1475 modules)
 LOG  🔧 Firestore debug logging enabled
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  [index] Project ID is:  6d6cd6da-7505-42d7-91fd-2928c6600b00
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  👤 WelcomeScreen: No user present, immediately showing auth screen
 LOG  🔍 setInitializing(false) called from: no user present
 LOG  👤 WelcomeScreen: No user present, skipping timeout
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": false, "disableFirestoreForNewUsers": false, "initializing": false, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔊 Haptic: medium impact
 LOG  🆕 Creating user with clean data (no apartment ID): {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  📝 Creating document in collection: users
 LOG  📋 Document data: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה"}
 LOG  🆔 Document ID: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 60 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🌐 Request URL: https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users?documentId=otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  📤 Request body fields: ["email", "full_name", "display_name"]
 LOG  📊 Response status: 200 ()
 LOG  Document created successfully: {"display_name": "למחיקה", "email": "del@gmail.com", "full_name": "למחיקה", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🎉 Registration successful, calling onAuthSuccess immediately...
 LOG  🎉 User data being passed: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🎉 onAuthSuccess function type: function
 LOG  🎉 onAuthSuccess function: [Function handleAuthSuccess]
 LOG  🎉 WelcomeScreen: handleAuthSuccess called!
 LOG  🎉 WelcomeScreen: Auth success, setting user and checking apartment...
 LOG  🎉 WelcomeScreen: User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  👤 WelcomeScreen: New user detected (no apartment_id), skipping ALL Firestore operations
 LOG  📭 WelcomeScreen: Directing new user to join/create apartment screen
 LOG  ✅ WelcomeScreen: Setting initializing to false for new user
 LOG  🔍 setInitializing(false) called from: handleAuthSuccess - new user
 LOG  ✅ WelcomeScreen: New user setup completed
 LOG  ✅ onAuthSuccess called successfully
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760033220058_spjnzkvex
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760033220058_spjnzkvex\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:07:00.059Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  🔄 WelcomeScreen: Force re-render after 100ms
 LOG  🔍 setInitializing(false) called from: handleAuthSuccess - force re-render
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 59 minutes
 LOG  ✅ ID token is valid
 LOG  🔄 Additional fallback: Checking if user is set...
 LOG  ✅ Additional fallback: User found in store, navigation should work
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 ERROR  i18next::pluralResolver: Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🚀 Initializing Firebase notifications for user: otmf6ZDcYigiDhogNKzrD4YRyfS2
 LOG  🚀 Initializing Firebase Web notification service...
 LOG  📱 Mobile platform - using mock token for testing
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  📱 Mock FCM Token (for testing): mock_fcm_token_1760033734402_d1esgey35
 LOG  🔐 Getting auth headers...
 LOG  ⏳ Waiting for authentication to be ready...
 LOG  🔑 Getting current ID token...
 LOG  🔑 Stored ID token: Present (eyJhbGciOiJSUzI1NiIs...)
 LOG  ⏰ Token expires in 51 minutes
 LOG  ✅ ID token is valid
 LOG  ✅ Authentication is ready
 LOG  🔍 Token info: {"algorithm": "RS256", "email": "del@gmail.com", "expiresAt": "2025-10-09T19:06:59.000Z", "issuedAt": "2025-10-09T18:06:59.000Z", "type": "JWT", "userId": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  ✅ Token project verified: roomies-hub
 LOG  ✅ Auth headers prepared successfully
 LOG  🔍 PATCH request details: {"body": "{
  \"fields\": {
    \"fcm_token\": {
      \"stringValue\": \"mock_fcm_token_1760033734402_d1esgey35\"
    },
    \"device_type\": {
      \"stringValue\": \"ios\"
    },
    \"last_seen\": {
      \"stringValue\": \"2025-10-09T18:15:34.402Z\"
    }
  }
}", "updateMaskFields": ["fcm_token", "device_type", "last_seen"], "url": "https://firestore.googleapis.com/v1/projects/roomies-hub/databases/(default)/documents/users/otmf6ZDcYigiDhogNKzrD4YRyfS2?updateMask.fieldPaths=fcm_token&updateMask.fieldPaths=device_type&updateMask.fieldPaths=last_seen"}
 LOG  ✅ FCM token saved to Firestore
 LOG  📱 Mobile platform - notification listeners not available in Expo Go
 LOG  ✅ Firebase Web notification service initialized successfully
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: true
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": true, "isNewUserRegistration": false, "mode": "select"}
 LOG  🔍 External user detected, forcing navigation to join/create screen
 LOG  🔍 User data: {"current_apartment_id": null, "email": "del@gmail.com", "id": "otmf6ZDcYigiDhogNKzrD4YRyfS2"}
 LOG  🔍 New user detected externally, setting up...
 LOG  🔍 setInitializing(false) called from: external user detection
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  👤 WelcomeScreen: Skipping timeout for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  👤 WelcomeScreen: Skipping checkUserSession useEffect for new user registration
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "create"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "select"}
 LOG  🔍 initializing state changed to: false
 LOG  🔍 Current state values: {"currentUser": true, "disableFirestoreForNewUsers": true, "initializing": false, "isNewUserRegistration": true, "mode": "join"}
